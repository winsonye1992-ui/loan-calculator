# 存贷组合产品测算器

## 项目简介

存贷组合产品测算器是一个用于帮助客户经理计算客户购买产品组合收益的工具，支持存款、贷款和外汇（即期、远期、掉期）产品的录入、修改、删除及收益汇总。

## 功能特性

### 🏦 产品管理
- **存款产品**: 支持多种币种，自动计算利息和本息
- **贷款产品**: 支持多种币种，自动计算利息和本息  
- **外汇产品**: 支持即期、远期、掉期三种类型
  - **即期/远期**: 支持币种兑换，自动计算买入金额
  - **掉期**: 支持近端和远端交易，自动计算期末收益

### 💾 数据存储
- 使用 IndexedDB 本地数据库存储产品信息
- 支持产品数据的增删改查
- 数据持久化，刷新页面不丢失

### 📱 移动端适配
- 基于 iPhone 预览框架设计
- 响应式布局，适配不同屏幕尺寸
- 触摸友好的交互设计

### ✅ 表单验证
- 实时表单验证
- 详细的错误提示
- 支持必填字段检查
- 数值范围验证

## 页面结构

```
page/
├── index.html              # 主页面（产品列表）
├── add-product.html        # 添加新产品页面
├── test.html              # 功能测试页面
├── js/
│   ├── database.js        # 数据库操作模块
│   ├── main.js           # 主页面逻辑
│   └── add-product.js    # 添加产品页面逻辑
└── styles/
    ├── main.css          # 主页面样式
    └── add-product.css   # 添加产品页面样式
```

## 使用方法

### 1. 启动项目
直接在浏览器中打开 `index.html` 文件即可开始使用。

### 2. 添加产品
1. 点击"添加新产品"按钮
2. 选择产品种类（存款/贷款/外汇）
3. 填写产品名称
4. 根据产品类型填写相应字段
5. 系统会自动计算相关数值
6. 点击"保存并返回"完成添加

### 3. 查看产品
- 在主页面可以查看所有已添加的产品
- 点击"更多"按钮可以展开查看产品详情
- 点击"编辑"按钮可以修改产品信息

### 4. 功能测试
打开 `test.html` 页面可以进行功能测试：
- 测试数据库连接
- 测试添加产品功能
- 测试获取产品列表
- 清空所有产品数据

## 技术架构

### 前端技术
- **HTML5**: 页面结构
- **CSS3**: 样式设计，使用CSS变量系统
- **JavaScript ES6+**: 业务逻辑
- **IndexedDB**: 本地数据存储

### 组件库
项目使用了完整的手机银行组件库：
- 导航栏组件
- 表单组件
- 按钮组件
- 弹窗组件
- iPhone预览框架

### 设计规范
- 遵循东莞银行设计规范
- 使用统一的颜色变量
- 响应式设计
- 移动端优先

## 数据模型

### 产品数据结构
```javascript
{
  id: 1,                    // 自增ID
  type: 'deposit',          // 产品类型
  name: '产品名称',          // 产品名称
  createTime: Date.now(),   // 创建时间
  updateTime: Date.now(),   // 更新时间
  
  // 存款/贷款产品字段
  currency: 'CNY',          // 币种
  amount: 100000,           // 金额
  rate: 3.5,               // 利率
  period: 365,             // 期限(天)
  interest: 3500,          // 利息
  principal: 103500,       // 本息
  
  // 外汇产品字段
  sellCurrency: 'USD',     // 卖出币种
  buyCurrency: 'CNY',      // 买入币种
  sellAmount: 10000,       // 卖出金额
  exchangeRate: 7.2,       // 汇率
  buyAmount: 72000,        // 买入金额
  
  // 掉期产品字段
  nearSellCurrency: 'USD', // 近端卖出币种
  nearBuyCurrency: 'CNY',  // 近端买入币种
  nearSellAmount: 10000,   // 近端卖出金额
  nearRate: 7.2,           // 近端汇率
  nearBuyAmount: 72000,    // 近端买入金额
  farSellCurrency: 'CNY',  // 远端卖出币种
  farBuyCurrency: 'USD',   // 远端买入币种
  farBuyAmount: 10000,     // 远端买入金额
  farRate: 7.1,            // 远端汇率
  farSellAmount: 71000,    // 远端卖出金额
  finalIncome: -1000       // 期末收益
  
  // 手续费信息
  feeCurrency: 'CNY',      // 手续费币种
  feeAmount: 100           // 手续费金额
}
```

## 计算规则

### 存款/贷款产品
- **利息** = 金额 × 利率 × 期限 ÷ 100
- **本息** = 金额 + 利息

### 外汇即期/远期产品
- **买入金额** = 卖出金额 × 汇率

### 外汇掉期产品
- **近端买入金额** = 近端卖出金额 × 近端汇率
- **远端买入金额** = 近端卖出金额
- **远端卖出金额** = 远端买入金额 × 远端汇率
- **期末收益** = 远端卖出金额 - 近端买入金额

## 验证规则

### 通用规则
- 金额字段：正数，保留2位小数，范围0.01-999,999,999.99
- 币种字段：必须选择支持的币种
- 利率：0.01%-99.99%
- 期限：1-1825天的正整数
- 汇率：0.01-9999.99

### 特殊规则
- 掉期产品：近端买入币种与远端卖出币种必须一致
- 产品名称：1-50个字符
- 手续费：如果填写金额，必须选择币种

## 浏览器兼容性

- Chrome 60+
- Safari 12+
- Firefox 55+
- Edge 79+

## 开发说明

### 添加新页面
1. 创建HTML文件
2. 引入必要的CSS和JS文件
3. 使用iPhone预览框架
4. 遵循现有的代码规范

### 修改样式
- 使用CSS变量系统
- 遵循响应式设计原则
- 保持与组件库的一致性

### 数据库操作
- 使用 `window.productDB` 实例
- 所有操作都是异步的
- 注意错误处理

## 更新日志

### v0.1.0 (2025-01-XX)
- 初始版本发布
- 支持存款、贷款、外汇产品管理
- 实现IndexedDB数据存储
- 完成主页面和添加产品页面

## 联系方式

如有问题或建议，请联系开发团队。
